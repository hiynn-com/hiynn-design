{"version":3,"sources":["../../components/comment/comment.js"],"names":["React","Component","moment","Reply","Comments","props","like","action","state","likes","dislikes","voteClick","commentid","dislike","replyClick","setState","replyShow","onCancel","preState","singleComment","componentDidMount","islike","UNSAFE_componentWillReceiveProps","nextprops","render","isMain","actions","paddingLeft","cursor","push","loginInfo","replySubmit","children"],"mappings":"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","sourcesContent":["import { Comment, Icon, Tooltip, Avatar } from 'antd';\nimport React, { Component } from \"react\";\nimport moment from 'moment';\nimport Reply from \"./reply\";\n\nclass Comments extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      likes: 0,\n      dislikes: 0,\n      action: null,\n      replyShow: false,\n      commentid: '',\n      singleComment: {}\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      singleComment: this.props.singleComment,\n      likes: this.props.singleComment.likes,\n      dislikes: this.props.singleComment.dislikes,\n      commentid: this.props.singleComment.commentid,\n      action: this.props.singleComment.islike,\n    })\n  }\n\n  UNSAFE_componentWillReceiveProps(nextprops) {\n    if (this.props != nextprops) {\n      this.setState({\n        singleComment: nextprops.singleComment,\n        likes: this.props.singleComment.likes,\n        dislikes: this.props.singleComment.dislikes,\n        commentid: this.props.singleComment.commentid,\n        action: this.props.singleComment.islike,\n      })\n    }\n  }\n\n  like = () => {\n    let action = this.state.action;\n    let likes = this.state.likes;\n    let dislikes = this.state.dislikes;\n    if (action == null) {\n      likes += 1;\n    } else if (action == 'dislike') {\n      likes += 1;\n      dislikes -= 1;\n    }\n    action = 'like';\n    this.props.voteClick(likes, dislikes, this.state.commentid, action);\n  };\n\n  dislike = () => {\n    let action = this.state.action;\n    let likes = this.state.likes;\n    let dislikes = this.state.dislikes;\n    if (action == null) {\n      dislikes += 1;\n    } else if (action == 'like') {\n      dislikes += 1;\n      likes -= 1;\n    }\n    action = 'dislike';\n    this.props.voteClick(likes, dislikes, this.state.commentid, action);\n  };\n\n  replyClick = () => {\n    this.setState({ replyShow: true });\n  }\n\n  onCancel = () => {\n    this.setState((preState) => {\n      return {\n        replyShow: !preState.replyShow\n      }\n    })\n  }\n\n  render() {\n    const { replyShow, likes, dislikes, action, singleComment } = this.state;\n    const { isMain } = this.props;\n    let actions = [\n      <span key=\"comment-basic-like\">\n        <Tooltip title=\"Like\">\n          <Icon\n            type=\"like\"\n            theme={action === 'like' ? 'filled' : 'outlined'}\n            onClick={this.like}\n          />\n        </Tooltip>\n        <span style={{ paddingLeft: 8, cursor: 'auto' }}>{likes}</span>\n      </span>,\n      <span key=' key=\"comment-basic-dislike\"'>\n        <Tooltip title=\"Dislike\">\n          <Icon\n            type=\"dislike\"\n            theme={action === 'dislike' ? 'filled' : 'outlined'}\n            onClick={this.dislike}\n          />\n        </Tooltip>\n        <span style={{ paddingLeft: 8, cursor: 'auto' }}>{dislikes}</span>\n      </span>\n    ];\n    if (isMain === false) {\n      actions.push(<span onClick={this.replyClick} key=\"comment-basic-reply-to\">回复</span>);\n    }\n    return (\n      <div>\n        <Comment actions={actions} {...singleComment} >\n          {\n            replyShow\n              ?\n              <Reply\n                loginInfo={this.props.loginInfo}\n                commentid={singleComment.commentid}\n                replySubmit={this.props.replySubmit}\n                onCancel={this.onCancel} />\n              : ''\n          }\n          {this.props.children}\n        </Comment>\n\n      </div>\n    );\n  }\n}\nexport default Comments;"],"file":"comment.js"}