{"version":3,"sources":["../../components/hd-formModal/index.js"],"names":["React","Component","moment","locale","FormItem","Item","Option","Dragger","props","name","multiple","action","onChange","info","status","file","success","error","horizontalLayout","labelCol","xs","span","sm","wrapperCol","FormModel","create","normFile","e","Array","isArray","latestFile","fileList","slice","map","response","timeStampFileName","result","originFileName","renderDOM","record","item","form","getFieldDecorator","domEl","isInitial","type","disabled","label","onBlur","width","children","key","opt","index","value","mode","rows","format","placeholder","initialValue","valuePropName","getValueFromEvent","length","rules","assign","Object","getLayout","layoutFlag","layoutText","layout","keys","render","visible","onCancel","onCreate","isEdit","title","destroyOnClose","okText","cancelText","formConfig","formLayout","forms"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport {\n  Modal,\n  Form,\n  Input,\n  Icon,\n  Select,\n  Upload,\n  DatePicker,\n  TimePicker,\n  InputNumber,\n  message,\n  Checkbox,\n  Radio\n} from \"antd\";\nimport moment from \"moment\";\nimport locale from 'antd/lib/date-picker/locale/zh_CN';\nconst FormItem = Form.Item;\nconst Option = Select.Option;\nconst Dragger = Upload.Dragger;\n// 单独上传文件\nconst props = {\n  name: \"file\",\n  multiple: true,\n  action: `http://192.168.8.58:8086/dataManagerSystem/file`,\n  onChange(info) {\n    const status = info.file.status;\n    if (status === \"done\") {\n      message.success(`${info.file.name} 上传成功！`);\n    } else if (status === \"error\") {\n      message.error(`${info.file.name} 上传失败！`);\n    }\n  }\n};\nconst horizontalLayout = {\n  labelCol: { xs: { span: 24 }, sm: { span: 5 } },\n  wrapperCol: { xs: { span: 22 }, sm: { span: 18 } }\n};\nconst FormModel = Form.create()(\n  class extends Component {\n    normFile = e => {\n      if (Array.isArray(e)) {\n        return e;\n      }\n      let latestFile = e && e.fileList.slice(-1);\n      latestFile = latestFile.map(file => {\n        if (file.response) {\n          file.timeStampFileName = file.response.result.timeStampFileName;\n          file.originFileName = file.response.result.originFileName;\n        }\n        return file;\n      });\n      return latestFile;\n    };\n    renderDOM = (record, item) => {\n      const { form } = this.props;\n      const { getFieldDecorator } = form;\n      let domEl = null;\n      let isInitial = true;\n      switch (item.type) {\n        case \"input\":\n          domEl = (\n            <Input\n              placeholder={item.disabled ? null : `请输入${item.label}`}\n              disabled={item.disabled}\n              onBlur={item.onBlur}\n              type={item.type}\n              style={{\"width\":item.width}}\n            />\n          );\n          break;\n          case \"checkbox\":\n            domEl = (\n                <Checkbox.Group\n                    options={item.children}\n                    disabled={item.disabled}\n                    onChange = {this[`${item.key}Change`]}/>\n                );\n            break;\n            case \"radio\":\n            domEl =<Radio.Group onChange = {this[`${item.key}Change`]}   disabled={item.disabled}>\n                    {item.children.map((opt,index)=>(\n                    <Radio key = {index} value = {opt.value} >\n                        {opt.label}\n                    </Radio>\n                ))} \n            </Radio.Group>\n            break;\n        case \"select\":\n          domEl = (\n            <Select\n              mode={item.mode}\n              placeholder={item.disabled ? null : `请选择${item.label}`}\n              disabled={item.disabled}\n              onChange = {this[`${item.key}Change`]}\n              style={{\"width\":item.width}}\n            >\n              {item.children.map((opt, index) => (\n                <Option key={index} value={opt.value}>\n                  {opt.label}\n                </Option>\n              ))}\n            </Select>\n          );\n          break;\n        case \"textarea\":\n          domEl = (\n            <Input.TextArea\n              rows={item.rows}\n              placeholder={item.disabled ? null : `请输入${item.label}`}\n              disabled={item.disabled}\n            />\n          );\n          break;\n        case \"datePicker\":\n          domEl = (\n            <DatePicker\n              showTime\n              format={item.format}\n              style={{\"width\":item.width}}\n              disabled={item.disabled}\n              placeholder={item.disabled ? null : `请输入${item.label}`}\n            />\n          );\n          break;\n        case \"timePicker\":\n          domEl = <TimePicker style={{\"width\":item.width}} format={item.format}  placeholder={item.disabled ? null : `${item.label}`}/>;\n          break;\n        case \"rangePickerTime\":\n          domEl = <DatePicker.RangePicker  onChange = {this[`${item.key}Change`]} locale={locale} showTime={{ format: item.format }}\n            format={item.format}  style={{\"width\":item.width}} placeholder={item.disabled ? []: item.placeholder} disabled={item.disabled} />;\n            break;\n        case \"inputNumber\":\n          domEl = (\n            <InputNumber\n            placeholder={item.disabled ? null : `请输入${item.label}`}\n            disabled={item.disabled}\n            style={{\"width\":item.width}}\n          />\n          );\n          break;\n        case \"inputFile\":\n                domEl = (\n                  <input\n                    onChange={item.onChange}\n                    placeholder={item.disabled ? null : `上传`}\n                    disabled={item.disabled}\n                    type=\"file\"\n                  />\n                );\n                break;\n        case \"upload\":\n          domEl = <div className=\"no-height\" />;\n            domEl = (\n              <Dragger name=\"files\" {...props}>\n                <p className=\"ant-upload-drag-icon\">\n                  <Icon type=\"inbox\" />\n                </p>\n                <p className=\"ant-upload-text\">选择或拖动文件到这里进行上传</p>\n                <p className=\"ant-upload-hint\">\n                  支持多文件上传，支持Excel、jpg、png等格式的文件\n                </p>\n              </Dragger>\n            );\n          break;\n        default:\n          break;\n      }\n      let initialValue =\n        item.type === \"upload\"\n          ? {\n              valuePropName: \"fileList\",\n              getValueFromEvent: this.normFile\n            }\n          : isInitial\n          ? {\n              initialValue: record\n                ? item.type === \"datePicker\" || item.type === \"timePicker\"\n                  ? moment(record[item.key], item.format)\n                  : record[item.key]\n                : item.initialValue\n                ? item.initialValue\n                : item.type === \"select\"\n                ? item.children.length\n                  ? item.children[0].value\n                  : \"\"\n                : \"\"\n            }\n          : {};\n      let rules ={rules:item.rules}\n      let assign = Object.assign(rules,initialValue)\n      return getFieldDecorator(item.key, assign)(domEl);\n    };\n    getLayout(layoutFlag,layoutText) {\n      let layout;\n      if (layoutFlag === \"horizontal\") {\n        layoutText&&Object.keys(layoutText).length>0?layout = layoutText:layout = horizontalLayout\n      } else if (layoutFlag === \"vertical\") {\n        layout = null;\n      }\n      return { ...layout };\n    }\n    render() {\n      const { visible, onCancel, onCreate, record, isEdit,title,destroyOnClose,width,okText,cancelText,formConfig} = this.props;\n      return (\n        <Modal\n          visible={visible}\n          title={title}\n          okText={okText}\n          cancelText={cancelText}\n          width={width}\n          maskClosable={false}\n          onCancel={onCancel}\n          onOk={onCreate}\n          destroyOnClose = {destroyOnClose}\n        >\n          <Form layout={formConfig.layout}  {...this.getLayout(formConfig.layout,formConfig.formLayout)} >\n            {formConfig.forms\n              .map((item, index) => {\n                return (\n                    <FormItem\n                      key={index}\n                      {...item.layout}\n                      label={item.label?item.label+\"：\":\"\"}\n                    >\n                      {this.renderDOM(record, item)}\n                    </FormItem>\n                  )\n              })}\n          </Form>\n        </Modal>\n      );\n    }\n  }\n);\n\nexport default FormModel;\n"],"file":"index.js"}