{"version":3,"sources":["../../components/hd-HGroup/index.js"],"names":["React","Component","PropTypes","classNames","style","cmpClsName","defaultH","sizeValidationFn","props","propName","componentName","val","reg","test","Error","flexMapping","left","top","right","bottom","center","justify","between","HGroup","componentDidMount","setCssVar","UNSAFE_componentWillReceiveProps","setState","dom","instance","attrObj","extraAttr","prop","setProperty","setClassName","className","cls","prefixCls","setAttributes","vAlign","hAlign","w","unitConvertor","h","String","includes","render","e","children","propTypes","oneOf","width","height","defaultProps"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,KAAT,QAAsB,0BAAtB,C,CAEA;;AACA,IAAMC,UAAU,GAAG,QAAnB,C,CACA;;AACA,IAAMC,QAAQ,GAAG,MAAjB,C,CACA;;AACA,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,KAAD,EAAQC,QAAR,EAAkBC,aAAlB,EAAoC;AAC3D,MAAMC,GAAG,GAAGH,KAAK,CAACC,QAAD,CAAjB;;AACA,MAAIE,GAAG,KAAKL,QAAZ,EAAsB;AACpB;AACD;;AACD,MAAMM,GAAG,GAAG,WAAZ;;AACA,MAAI,CAACA,GAAG,CAACC,IAAJ,CAASF,GAAT,CAAL,EAAoB;AAClB,WAAO,IAAIG,KAAJ,8BAAiBJ,aAAjB,0BAAoCD,QAApC,kEAAP;AACD;AACF,CATD,C,CAUA;;;AACA,IAAMM,WAAW,GAAG;AAClBC,EAAAA,IAAI,EAAE,YADY;AAElBC,EAAAA,GAAG,EAAE,YAFa;AAGlBC,EAAAA,KAAK,EAAE,UAHW;AAIlBC,EAAAA,MAAM,EAAE,UAJU;AAKlBC,EAAAA,MAAM,EAAE,QALU;AAMlBC,EAAAA,OAAO,EAAE,cANS;AAOlBC,EAAAA,OAAO,EAAE;AAPS,CAApB;;IAUqBC,M;;;;;AACnB;AAQA;AAQA;AAQA,kBAAYf,KAAZ,EAAmB;AAAA,WACjB,sBAAMA,KAAN,CADiB;AAElB;AAED;;;;;;;SAGAgB,iB,GAAA,6BAAoB;AAClB,SAAKC,SAAL;AACD;AAED;;;;;SAGAC,gC,GAAA,4CAAmC;AAAA;;AACjC,SAAKC,QAAL,CAAc,EAAd,EAAkB,YAAM;AACtB,MAAA,KAAI,CAACF,SAAL;AACD,KAFD;AAGD;AAED;;;;;SAGAA,S,GAAA,qBAAY;AACV,QAAMG,GAAG,GAAG,KAAKC,QAAjB;AACA,QAAMC,OAAO,GAAG,KAAKC,SAArB;;AACA,QAAIH,GAAG,IAAIE,OAAX,EAAoB;AAClB,WAAK,IAAIE,IAAT,IAAiBF,OAAjB,EAA0B;AACxBF,QAAAA,GAAG,CAACxB,KAAJ,CAAU6B,WAAV,CAAsBD,IAAtB,EAA4BF,OAAO,CAACE,IAAD,CAAnC;AACD;AACF;AACF;AAED;;;;;SAGAE,Y,GAAA,wBAAe;AAAA,QACLC,SADK,GACS,KAAK3B,KADd,CACL2B,SADK;AAEb,QAAIC,GAAG,GAAGjC,UAAU,CAAIC,KAAK,CAACiC,SAAV,SAAuBhC,UAAvB,EAAqC8B,SAArC,CAApB;AACA,WAAOC,GAAP;AACD;AAED;;;;;;SAIAE,a,GAAA,uBAAc9B,KAAd,EAAqB;AAAA;;AACnB,QAAI+B,MAAM,GAAGxB,WAAW,CAACP,KAAK,CAAC,gBAAD,CAAN,CAAxB;AACA,QAAIgC,MAAM,GAAGzB,WAAW,CAACP,KAAK,CAAC,kBAAD,CAAN,CAAxB;AACA,QAAIiC,CAAC,GAAG,KAAKC,aAAL,CAAmBlC,KAAK,CAAC,OAAD,CAAxB,CAAR;AACA,QAAImC,CAAC,GAAG,KAAKD,aAAL,CAAmBlC,KAAK,CAAC,QAAD,CAAxB,CAAR;AAEA,SAAKuB,SAAL,0CACG,SADH,IACeU,CADf,kBAEG,UAFH,IAEgBE,CAFhB,kBAGG,kBAHH,IAGwBJ,MAHxB,kBAIG,oBAJH,IAI0BC,MAJ1B;AAMD;AAED;;;;;;SAIAE,a,GAAA,uBAAc/B,GAAd,EAAmB;AACjB,QAAIiC,MAAM,CAACjC,GAAD,CAAN,CAAYkC,QAAZ,CAAqB,GAArB,CAAJ,EAA+B;AAC7B,aAAOlC,GAAP;AACD,KAFD,MAEO;AACL,aAAOA,GAAG,GAAG,IAAb;AACD;AACF,G;;SAEDmC,M,GAAA,kBAAS;AAAA;;AACP,SAAKR,aAAL,CAAmB,KAAK9B,KAAxB;AACA,QAAM4B,GAAG,GAAG,KAAKF,YAAL,EAAZ;AACA,WACE;AACE,MAAA,SAAS,EAAEE,GADb;AAEE,MAAA,GAAG,EAAE,aAAAW,CAAC,EAAI;AACR,QAAA,MAAI,CAAClB,QAAL,GAAgBkB,CAAhB;AACD;AAJH,OAKM,KAAKvC,KALX,GAOG,KAAKA,KAAL,CAAWwC,QAPd,CADF;AAWD,G;;;EA/GiC/C,S;;AAAfsB,M,CAEZ0B,S,8CACJ,gB,IAAmB/C,SAAS,CAACgD,KAAV,CAAgB,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,CAAhB,C,oBACnB,kB,IAAqBhD,SAAS,CAACgD,KAAV,CAAgB,CAAC,MAAD,EAAS,QAAT,EAAmB,OAAnB,EAA4B,SAA5B,EAAuC,SAAvC,CAAhB,C,oBACtBC,K,GAAO5C,gB,oBACP6C,M,GAAQ7C,gB;AANSgB,M,CAUZ0B,S,gDACJ,gB,IAAmB/C,SAAS,CAACgD,KAAV,CAAgB,CAAC,KAAD,EAAQ,QAAR,EAAkB,QAAlB,CAAhB,C,qBACnB,kB,IAAqBhD,SAAS,CAACgD,KAAV,CAAgB,CAAC,MAAD,EAAS,QAAT,EAAmB,OAAnB,EAA4B,SAA5B,EAAuC,SAAvC,CAAhB,C,qBACtBC,K,GAAO5C,gB,qBACP6C,M,GAAQ7C,gB;AAdSgB,M,CAkBZ8B,Y,oDACJ,gB,IAAmB,Q,uBACnB,kB,IAAqB,S,uBACtBF,K,GAAO,M,uBACPC,M,GAAQ,M;SAtBS7B,M","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { style } from \"../context/style-context\";\n\n// 组件容器的类名，前面需加上前缀‘hd’\nconst cmpClsName = \"hgroup\";\n// 默认的高度height值\nconst defaultH = \"auto\";\n// 宽高的props输入验证函数\nconst sizeValidationFn = (props, propName, componentName) => {\n  const val = props[propName];\n  if (val === defaultH) {\n    return;\n  }\n  const reg = /[0-9]+%?/g;\n  if (!reg.test(val)) {\n    return new Error(`传给组件${componentName}的属性${propName}的值不合法，校验失败`);\n  }\n};\n// 设置的对齐方式与flex布局的映射\nconst flexMapping = {\n  left: \"flex-start\",\n  top: \"flex-start\",\n  right: \"flex-end\",\n  bottom: \"flex-end\",\n  center: \"center\",\n  justify: \"space-around\",\n  between: \"space-between\"\n};\n\nexport default class HGroup extends Component {\n  // 类型检查\n  static propTypes = {\n    [\"vertical-align\"]: PropTypes.oneOf([\"top\", \"center\", \"bottom\"]),\n    [\"horizontal-align\"]: PropTypes.oneOf([\"left\", \"center\", \"right\", \"justify\", \"between\"]),\n    width: sizeValidationFn,\n    height: sizeValidationFn\n  };\n\n  // 类型检查\n  static propTypes = {\n    [\"vertical-align\"]: PropTypes.oneOf([\"top\", \"center\", \"bottom\"]),\n    [\"horizontal-align\"]: PropTypes.oneOf([\"left\", \"center\", \"right\", \"justify\", \"between\"]),\n    width: sizeValidationFn,\n    height: sizeValidationFn\n  };\n\n  // 默认props\n  static defaultProps = {\n    [\"vertical-align\"]: \"center\", // 垂直对齐\n    [\"horizontal-align\"]: \"justify\", // 水平对齐\n    width: \"100%\", // 宽度\n    height: \"auto\" // 高度\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  /**\n   * 组件挂载后，设置css变量，使得样式生效\n   */\n  componentDidMount() {\n    this.setCssVar();\n  }\n\n  /**\n   * 组件接收新的props后，更新组件，并重新设置css变量\n   */\n  UNSAFE_componentWillReceiveProps() {\n    this.setState({}, () => {\n      this.setCssVar();\n    });\n  }\n\n  /**\n   * 通过js设置css属性，使得css变量能够获取其中的值\n   */\n  setCssVar() {\n    const dom = this.instance;\n    const attrObj = this.extraAttr;\n    if (dom && attrObj) {\n      for (let prop in attrObj) {\n        dom.style.setProperty(prop, attrObj[prop]);\n      }\n    }\n  }\n\n  /**\n   * 获取类名\n   */\n  setClassName() {\n    const { className } = this.props;\n    let cls = classNames(`${style.prefixCls}-${cmpClsName}`, className);\n    return cls;\n  }\n\n  /**\n   * 通过props传递的内容，在react组件对象上保存extraAttr，然后将此对象的内容设置到dom对象的属性中\n   * @param {*} props\n   */\n  setAttributes(props) {\n    let vAlign = flexMapping[props[\"vertical-align\"]];\n    let hAlign = flexMapping[props[\"horizontal-align\"]];\n    let w = this.unitConvertor(props[\"width\"]);\n    let h = this.unitConvertor(props[\"height\"]);\n\n    this.extraAttr = {\n      [\"--width\"]: w,\n      [\"--height\"]: h,\n      [\"--vertical-align\"]: vAlign,\n      [\"--horizontal-align\"]: hAlign\n    };\n  }\n\n  /**\n   * 输入数字，则后面添加单位px，输入百分比则原样输出\n   * @param {*} val\n   */\n  unitConvertor(val) {\n    if (String(val).includes(\"%\")) {\n      return val;\n    } else {\n      return val + \"px\";\n    }\n  }\n\n  render() {\n    this.setAttributes(this.props);\n    const cls = this.setClassName();\n    return (\n      <div\n        className={cls}\n        ref={e => {\n          this.instance = e;\n        }}\n        {...this.props}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n"],"file":"index.js"}